[modification]
	id=Rav_XP_Mod
	name=_"XP Mod"
	description=_"XP era of 1.10 written as configurable modification

version 2.1.1 by Ravana - based on work by Dovolente, itota and Nosmos

For units with drain all upgrades cost 1.5 times more"
	require_modification=no
	[options]
		[checkbox]
			id=Rav_XP_hp_enabled
			default=true
			name=_"HP enabled"
			description=_"Hitpoints upgrades on/off"
		[/checkbox]
		[checkbox]
			id=Rav_XP_move_enabled
			default=true
			name=_"MP enabled"
			description=_"Movement upgrades on/off"
		[/checkbox]
		[checkbox]
			id=Rav_XP_damage_enabled
			default=true
			name=_"DMG enabled"
			description=_"Damage upgrades on/off"
		[/checkbox]
		[checkbox]
			id=Rav_XP_strike_enabled
			default=true
			name=_"Strikes enabled"
			description=_"Strikes upgrades on/off"
		[/checkbox]
		[slider]
			id=Rav_XP_hp_cost
			default=6
			min=4
			max=12
			step=1
			name=_"HP cost"
			description=_"XP required to upgrade hitpoints"
		[/slider]
		[slider]
			id=Rav_XP_move_cost
			default=10
			min=8
			max=16
			step=1
			name=_"MP cost"
			description=_"XP required to upgrade movement"
		[/slider]
		[slider]
			id=Rav_XP_damage_cost
			default=16
			min=12
			max=28
			step=2
			name=_"DMG cost"
			description=_"XP required to upgrade damage"
		[/slider]
		[slider]
			id=Rav_XP_strike_cost
			default=56
			min=40
			max=56
			step=2
			name=_"Strike cost"
			description=_"XP required to upgrade strikes"
		[/slider]
	[/options]

	[event]
		name=turn 1
		{VARIABLE Rav_XP_hp_amount 4}
		{VARIABLE Rav_XP_move_amount 1}
		{VARIABLE Rav_XP_damage_amount 1}
		{VARIABLE Rav_XP_strike_amount 1}
		{VARIABLE Rav_XP_hp_cost_drainer "$($Rav_XP_hp_cost * 15 / 10)"}
		{VARIABLE Rav_XP_move_cost_drainer "$($Rav_XP_move_cost * 15 / 10)"}
		{VARIABLE Rav_XP_damage_cost_drainer "$($Rav_XP_damage_cost * 15 / 10)"}
		{VARIABLE Rav_XP_strike_cost_drainer "$($Rav_XP_strike_cost * 15 / 10)"}
		{XP_MOD_MENU_SETUP}
		[if]
			[variable]
				name=Rav_XP_hp_enabled
				equals=no
			[/variable]
			[then]
				[clear_menu_item]
					id=xp_mod_a,xp_mod_b
				[/clear_menu_item]
				{CLEAR_VARIABLE Rav_XP_hp_cost,Rav_XP_hp_cost_drainer,Rav_XP_hp_amount}
			[/then]
		[/if]
		[if]
			[variable]
				name=Rav_XP_move_enabled
				equals=no
			[/variable]
			[then]
				[clear_menu_item]
					id=xp_mod_c,xp_mod_d
				[/clear_menu_item]
				{CLEAR_VARIABLE Rav_XP_move_cost,Rav_XP_move_cost_drainer,Rav_XP_move_amount}
			[/then]
		[/if]
		[if]
			[variable]
				name=Rav_XP_damage_enabled
				equals=no
			[/variable]
			[then]
				[clear_menu_item]
					id=xp_mod_e,xp_mod_f
				[/clear_menu_item]
				{CLEAR_VARIABLE Rav_XP_damage_cost,Rav_XP_damage_cost_drainer,Rav_XP_damage_amount}
			[/then]
		[/if]
		[if]
			[variable]
				name=Rav_XP_strike_enabled
				equals=no
			[/variable]
			[then]
				[clear_menu_item]
					id=xp_mod_g,xp_mod_h
				[/clear_menu_item]
				{CLEAR_VARIABLE Rav_XP_strike_cost,Rav_XP_strike_cost_drainer,Rav_XP_strike_amount}
			[/then]
		[/if]
		[lua]
			code = << 
			local hp = wesnoth.get_variable "Rav_XP_hp_enabled"
			local mp = wesnoth.get_variable "Rav_XP_move_enabled"
			local dmg = wesnoth.get_variable "Rav_XP_damage_enabled"
			local str = wesnoth.get_variable "Rav_XP_strike_enabled"
			local settings = ""
			if hp then settings = settings .. "Hitpoints cost: " .. wesnoth.get_variable "Rav_XP_hp_cost" .. " | " else end
			if mp then settings = settings .. "Movement cost: " .. wesnoth.get_variable "Rav_XP_move_cost" .. " | " else end
			if dmg then settings = settings .. "Damage cost: " .. wesnoth.get_variable "Rav_XP_damage_cost" .. " | " else end
			if str then settings = settings .. "Strikes cost: " .. wesnoth.get_variable "Rav_XP_strike_cost" .. " | " else end
			if settings == "" then else wesnoth.message("XP Mod version 2.1.0",settings) end
			>>
		[/lua]
		{CLEAR_VARIABLE Rav_XP_strike_enabled,Rav_XP_damage_enabled,Rav_XP_move_enabled,Rav_XP_hp_enabled}
	[/event]

[/modification]
